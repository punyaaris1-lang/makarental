<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MAKA Dashboard</title>

<link rel="stylesheet" href="app.css">
<link rel="stylesheet" href="styles.css"> 
</head>

<body class="app-body">
<div class="app-container">

<header class="header">
  <div class="user-info">
    <h1 id="userName">Halo</h1>
    <p>Plat Motor <b id="userPlate"></b></p>
  </div>

  <div class="hero-tunggakan">
    <div>
      <h3 id="tunggakanTitle">JUMLAH TUNGGAKAN</h3>
      <p class="hero-sub" id="tunggakanDays">0 Hari</p>
    </div>
    <div class="hero-tunggakan-value">
      <span id="billTotal">Rp 0</span>
    </div>
  </div>

  <div class="futuristic-divider"></div>

  <div class="progress-box">
    <div class="progress-label">
      <span id="progressLabel">Progress RTO</span>
      <span id="progressText">0 / 1009 Hari</span>
    </div>
    <div class="progress-bar">
      <div id="progressBarFill"></div>
    </div>
  </div>
  
</header>

<section class="icon-grid-section">
<h3 class="section-title">âœ¨ Fitur</h3>

<div class="icon-grid">
  <a href="calendar.html" class="icon-item">
    <span>ğŸ“…</span>
    <p>Kalender</p>
  </a>

  <a href="history.html" class="icon-item">
    <span>ğŸ§¾</span>
    <p>Riwayat</p>
  </a>

  <a href="part_tracker.html" class="icon-item">
    <span>ğŸ</span>
    <p>Part Gratis</p>
  </a>

  <a href="info_mlu.html" class="icon-item">
    <span>ğŸ“°</span>
    <p>Info MLU</p>
  </a>

  <a href="tips_maka.html" class="icon-item">
    <span>ğŸ’¡</span>
    <p>Maka Tips</p>
  </a>

  <a href="maka_plus.html" class="icon-item">
    <span>â­</span>
    <p>MAKA+</p>
  </a>

  <a href="settings.html" class="icon-item">
    <span>âš™ï¸</span>
    <p>Setting</p>
  </a>
  
  <a href="https://wa.me/62812XXXXXXX" target="_blank"
     class="icon-item sos-card">
     <span>ğŸš¨</span>
     <p>SOS CS</p>
  </a>

</div>
</section>

</div>

<footer class="bottom-nav">
  <a href="lokasi_fc.html" class="nav-item"><span>âš¡</span>FC</a>
  <a href="dashboard.html" class="nav-item active"><span>ğŸ </span>Home</a>
  <a href="calendar.html" class="nav-item"><span>ğŸ“…</span>Bayar</a>
</footer>

<script src="app.js"></script>
<script>
// Logic Dashboard.html
const user = getActiveUser();
if(!user) location.href='index.html';

const totalDays = DB.config.totalRentalDays;
const tunggakanData = getTotalTunggakan(user);
const progressPercent = (user.progressHari / totalDays) * 100;

document.getElementById('userName').textContent = 'Halo, ' + user.nama;
document.getElementById('userPlate').textContent = user.plat;

// TUNGGAKAN
document.getElementById('billTotal').textContent = formatIDR(tunggakanData.nominal);
document.getElementById('tunggakanDays').textContent = tunggakanData.hari + ' Hari Tertunggak';
// Beri efek danger jika ada tunggakan
if(tunggakanData.hari > 0) {
    document.getElementById('billTotal').style.color = 'var(--holiday-color)'; // Merah
    document.getElementById('tunggakanDays').style.color = 'var(--holiday-color)'; 
}

// PROGRESS BAR
document.getElementById('progressText').textContent = user.progressHari + ' / ' + totalDays + ' Hari';
document.getElementById('progressBarFill').style.width = progressPercent.toFixed(2) + '%';
</script>

</body>
</html>
