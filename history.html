<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Riwayat</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body { margin:0; font-family:'Inter'; background:#f8fafc; color:#0f1724; padding-bottom:100px; }
.con { max-width:480px; margin:0 auto; padding:20px; }
h1 { font-family:'Syne'; margin:0 0 20px 0; }
.card { background:#fff; padding:15px; border-radius:16px; border:1px solid #e2e8f0; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; }
.l h4 { margin:0; font-family:'Syne'; } .l p { margin:0; font-size:0.8em; color:#64748b; }
.r { text-align:right; font-weight:800; font-family:'Syne'; }
.ok { font-size:0.6em; background:#dcfce7; color:#166534; padding:3px 8px; border-radius:5px; }
footer { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#0f1724; padding:12px 30px; border-radius:50px; display:flex; gap:30px; z-index:99; }
.ni { text-decoration:none; color:#94a3b8; font-size:9px; font-weight:700; display:flex; flex-direction:column; align-items:center; }
.ni span { font-size:20px; margin-bottom:2px; }
</style>
</head>
<body>
<div class="con"><h1>Riwayat</h1><div id="lst">Memuat...</div></div>
<footer><a href="lokasi_fc.html" class="ni"><span>‚ö°</span>Lokasi</a><a href="dashboard.html" class="ni"><span>üè†</span>Home</a><a href="daftar_antrian.html" class="ni"><span>üé´</span>Antrian</a></footer>
<script>
const c={apiKey:"AIzaSyAk3G5aQUBVe_g7_peVu1F6xllP_RejGq0",authDomain:"rtomaka-e67b5.firebaseapp.com",projectId:"rtomaka-e67b5",storageBucket:"rtomaka-e67b5.firebasestorage.app",messagingSenderId:"472036722228",appId:"1:472036722228:web:11d520f9204db317d02c61"};
try{if(!firebase.apps.length)firebase.initializeApp(c);var db=firebase.firestore();}catch(e){}
let u=JSON.parse(localStorage.getItem('maka_user'));
if(u) db.collection('daily_payments').where('plat','==',u.plat).limit(30).onSnapshot(s=>{
    let d=[]; s.forEach(x=>d.push(x.data())); d.sort((a,b)=>new Date(b.date)-new Date(a.date));
    let h=''; d.forEach(i=>{ h+=`<div class="card"><div class="l"><h4>${i.date}</h4><p>Lunas</p></div><div class="r">Rp 70.000<br><span class="ok">SUKSES</span></div></div>`; });
    document.getElementById('lst').innerHTML=h||'Kosong';
});
</script></body></html>
