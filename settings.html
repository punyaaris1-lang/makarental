<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Profil</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body { margin:0; font-family:'Inter'; background:#f8fafc; color:#0f1724; padding-bottom:100px; }
.con { max-width:480px; margin:0 auto; padding:20px; }
.card { background:#fff; padding:30px; border-radius:24px; border:1px solid #e2e8f0; text-align:center; margin-bottom:20px; }
.av { width:80px; height:80px; background:#0f1724; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'Syne'; font-size:2em; margin:0 auto 10px; background-size:cover; }
.btn { width:100%; padding:15px; border:1px solid #ef4444; background:#fee2e2; color:#ef4444; border-radius:14px; font-weight:700; cursor:pointer; }
.menu { background:#fff; border-radius:16px; border:1px solid #e2e8f0; margin-bottom:20px; }
.itm { padding:15px; border-bottom:1px solid #f1f5f9; display:flex; justify-content:space-between; font-weight:600; }
.val { color:#64748b; font-weight:400; }
footer { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:#0f1724; padding:12px 30px; border-radius:50px; display:flex; gap:30px; z-index:99; }
.ni { text-decoration:none; color:#94a3b8; font-size:9px; font-weight:700; display:flex; flex-direction:column; align-items:center; }
.ni span { font-size:20px; margin-bottom:2px; }
</style>
</head>
<body>
<div class="con">
    <div class="card">
        <input type="file" id="f" hidden onchange="up(this)">
        <div class="av" id="av" onclick="document.getElementById('f').click()">U</div>
        <h2 id="nm" style="font-family:'Syne';margin:0">...</h2><p id="pt" style="color:#64748b;margin:5px 0 0;">...</p>
    </div>
    <div class="menu">
        <div class="itm"><span>WhatsApp</span><span class="val" id="hp">-</span></div>
        <div class="itm"><span>Join Date</span><span class="val" id="jd">-</span></div>
    </div>
    <button class="btn" onclick="localStorage.clear();location.href='index.html'">LOGOUT</button>
</div>
<footer><a href="lokasi_fc.html" class="ni"><span>‚ö°</span>Lokasi</a><a href="dashboard.html" class="ni"><span>üè†</span>Home</a><a href="daftar_antrian.html" class="ni"><span>üé´</span>Antrian</a></footer>
<script>
const c={apiKey:"AIzaSyAk3G5aQUBVe_g7_peVu1F6xllP_RejGq0",authDomain:"rtomaka-e67b5.firebaseapp.com",projectId:"rtomaka-e67b5",storageBucket:"rtomaka-e67b5.firebasestorage.app",messagingSenderId:"472036722228",appId:"1:472036722228:web:11d520f9204db317d02c61"};
try{if(!firebase.apps.length)firebase.initializeApp(c);var db=firebase.firestore();}catch(e){}
let u=JSON.parse(localStorage.getItem('maka_user'));
if(u){
    document.getElementById('nm').innerText=u.nama; document.getElementById('pt').innerText=u.plat; document.getElementById('hp').innerText=u.hp; document.getElementById('jd').innerText=u.joinedAt.split('T')[0];
    db.collection('users').doc(u.plat).get().then(d=>{if(d.data().photoUrl)document.getElementById('av').style.backgroundImage=`url('${d.data().photoUrl}')`});
}
function up(i){
    let r=new FileReader(); r.readAsDataURL(i.files[0]);
    r.onload=e=>{db.collection('users').doc(u.plat).update({photoUrl:e.target.result});location.reload();}
}
</script></body></html>
